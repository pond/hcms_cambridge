<h1>All pages</h1>

<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Owner</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
<% @admin_pages.each do |admin_page| -%>
      <tr class="<%= cycle( 'even', 'odd' ) %>">
        <td><%= admin_page.title %></td>
        <td>&nbsp;</td>
        <td><%= link_to 'Show', admin_page %></td>
        <td><%= link_to 'Edit', edit_admin_page_path( admin_page ) %></td>
        <td><%= link_to 'Destroy', admin_page, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
<%  sub_pages = Admin::Page.where( :page_id => admin_page.id ).all
    sub_pages.each do | sub_page | -%>
      <tr class="<%= cycle( 'even', 'odd' ) %>">
        <td>&mdash; <%= sub_page.title %></td>
        <td><%= sub_page.page.title %></td>
        <td><%= link_to 'Show', sub_page %></td>
        <td><%= link_to 'Edit', edit_admin_page_path( sub_page ) %></td>
        <td><%= link_to 'Destroy', sub_page, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
<%  end -%>
<% end -%>
  </tbody>
</table>

<br>

<%= link_to 'New Page', new_admin_page_path %>
